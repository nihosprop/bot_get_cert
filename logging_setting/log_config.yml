version: 1
disable_existing_loggers: True

formatters:
  formatter:
    format: '[{asctime}] #{levelname:<8} {filename:<17}:{lineno:4} - <{funcName}> - {message}'
    datefmt: '%Y.%m.%d %H:%M:%S'
    style: '{'

filters:
  get_cert_filter:
    (): logging_setting.filters.GetCertFilter

handlers:
  stdout:
    class: logging.StreamHandler
    formatter: formatter
    stream: ext://sys.stdout

  file:
    class: logging.handlers.RotatingFileHandler
    formatter: formatter
    filename: /app/logs/app.log
    maxBytes: 10485760
    backupCount: 3
    mode: 'a'

  telegram_cert:
    class: logging_setting.handlers.TelegramAsyncHandler
    formatter: formatter
    level: INFO
    bot_token: ''
    chat_id: 0
    thread_id: 0
    filters: [get_cert_filter]

  telegram_error:
    class: logging_setting.handlers.TelegramAsyncHandler
    formatter: formatter
    level: ERROR
    bot_token: ''
    chat_id: 0
    thread_id: 0

loggers:

  queues.que_utils:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  handlers.temp_handlers:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  handlers.admin_handlers:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  middlewares.outer:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  handlers.user_handlers:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  handlers.other_handlers:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  config_data.config:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  filters.filters:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  keyboards.keyboard_utils:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  keyboards.keyboards:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  keyboards.set_menu:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  lexicon.lexicon_ru:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  states.states:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  utils.utils:
    level: INFO
    handlers: [ stdout, file, telegram_cert, telegram_error ]
    propagate: no

  logging_setting.handlers:
    level: INFO
    handlers: [ stdout, file, telegram_error ]
    propagate: no

  __main__:
    level: INFO
    handlers: [stdout, file, telegram_error]
    propagate: no

root:
  level: INFO
  handlers: [stdout, file]